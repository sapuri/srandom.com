{% extends "base.html" %}
{% load bootstrap3 %}
{% load custom_filter %}

{% block title %}{{ user.player_name|default:user.username }}のクリア状況(Lv{{ sran_level }}) - スパランドットコム{% endblock %}

{% block extrahead %}
<meta name="description" content="スパランドットコムのクリア状況確認ページです。(Lv{{ sran_level }})">
<script src="/static/js/user_music_list.js?v=20160508"></script>
{% endblock %}

{% block content %}
<h1 class="page-header">{% bootstrap_icon "star-empty" %} クリア状況</h1>
<h2>{% bootstrap_icon "user" %} {{ user.player_name|default:user.username }}</h2>
{% if user == myself or user.cleardata_privacy == 1 %}
<h3 id="lv{{ sran_level }}" class="level-folder">Lv{{ sran_level }}</h3>
<div id="lv{{ sran_level }}-table">
<table class="music-list table table-condensed">
    <thead>
        <th>Lv</th>
        <th>曲名</th>
        <th>難易度</th>
        <th>BPM</th>
        <th>メダル</th>
        <th>BAD数</th>
        <th>更新日時</th>
    </thead>
    <tbody>
        {% for music in music_list %}
        <tr id="music-{{ music.id }}">
            <script>getClearStatus({{ music.id }}, {{ user.id }});</script>
            <td class="level">{{ music.level }}</td>
            <td class="title"><a href="{% url 'main:ranking_detail' music.id %}">{{ music.title }}</a></td>
            <td class="difficulty">{{ music.difficulty }}</td>
            <td class="bpm">{{ music.bpm|default:'-' }}</td>
            <td class="medal">
                <div class="loading"></div>
                <img>
                <script>getMedal({{ music.id }}, {{ user.id }});</script>
            </td>
            <td class="bad_count">
                <div class="loading"></div>
                <script>getBadCount({{ music.id }}, {{ user.id }});</script>
            </td>
            <td class="updated_at">
                <div class="loading"></div>
                <script>getLatestUpdatedAt({{ music.id }}, {{ user.id }});</script>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% else %}
<p>クリアデータは非公開に設定されています。</p>
{% endif %}
{% endblock %}
